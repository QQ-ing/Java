# Defining Microservice Components

## Service Discovery

### DNS

DNS maps the name with the IP address. Multiple addresses can be mapped to a single service.

### Discovery service need
* Services should be able to register or deregister their availability
* Services should be able to communicate their changes to other services
* Services should be able to locate a single instance of a particular service

Solutions of discovery services

* Etcd by CoreOS
* Eureka by Netflix
* Consul by HashiCorp
* Apache ZooKeeper
* SkyDNS
* SmartStack by Airbnb

### Registry/deregistry of services

Any new service coming into existence or one that is destroyed or pulled out for maintenance should be aware of every event happening with its client. The following are the two types of registering mechanism:

* Self-registration
* Third-party registration

In self-registration, each microservice coming up in the system should register itself to the discovery service. While shutting down, it should also notify the discovery service. With these, the notification discovery service marks services as available or not available. Self-registry looks like a simple and clean solution for this, but it contradicts the single responsibility principle. Microservice will have one more responsibility of notifying the discovery service about its events.

In third-party registration, a separate process along with service discovery is responsible for keeping an eye on all the microservices running. This new process uses different mechanism to check the healthiness of the microservice such as poll, heartbeat, or hitting microservice health URL, and updates information in it. It should have some mechanism in place to detect the failing of any microservice.

# Java日志最佳实践

## 接口和实现

目前Java有三个比较常用的日志接口，分别为：JCL、SL4J、Log4j2-API，四个比较常用的具体实现：Log4j、JUL、Logback、Log4j2。在开发过程中，尽可能地依赖接口而不是实现编程。

## 性能

以打印json数据为例，在以前我们可能这样写：

```Java
log.debug("buy goods: " + toJson(goods));
```
这里有个性能问题，当我们把日志级别调到info之后，这里的json序列化和字符串拼接依然避免不了。 所以，后面有类似占位符之列的实现：

```Java
log.debug("buy goods:{}", toJson(goods));
```
但是依然无法避免json序列化的无用功，所以，我们可能会这样写：

```Java
if(log.debugEnabled()){
  log.debug("buy goods:{}", toJson(goods));
}
```

虽然代码冗余，但也较好地实现了需求。而从Java8开始后，Log4j2提供了lambda的实现，如下：

```Java
log.debug("buy goods:{}", () -> toJson(goods));
```

## 可读性-规范

## 日志级别

## 分布式系统

## Lombok

## 参考资料

* https://zhuanlan.zhihu.com/p/24272450
* https://zhuanlan.zhihu.com/p/24275518
* http://www.importnew.com/17315.html
